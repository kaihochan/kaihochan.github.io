import{_ as F,a as H,o as h,c as x,b as s,w as n,d as y,r as u,g as K,e as c,t as d,F as P,f as U,k as f,h as b,i as j}from"./entry-e0f1e041.mjs";import{u as R}from"./cookie-3eb92dae.mjs";const Q={setup(){return{API:H().API_LINK}},data(){return{add:"mdi-plus",Select:"",Sign:"<",Price:"",items:["Gas","ETH"],signselect:["<",">"],tracks:[],wallets:[],CurrentTrack:[],CurrentWallet:[],AddingName:"",AddingAddr:"",AddingColor:"#ffa000",EditingName:"",EditingAddr:"",EditingColor:"",colorOpt:[["#ffa000"],["#f44336"],["#2196f3"],["#9c27b0"],["#f03a95"],["#4caf50"]],checkEmpty:t=>!!t||this.$t("setAlert.required"),disableBtnTrack:!0,disableBtnEdit:!1,disableBtnWallet:!0,enableSound:!1,dialogDelTrack:!1,dialogEdit:!1,dialogDelWallet:!1,dialogAddTrack:!1,dialogAddWallet:!1}},beforeMount(){this.Select="",this.Sign="<",this.Price="",this.items=["Gas","ETH"],this.signselect=["<",">"]},mounted(){this.updatetracklist(),this.tracks=JSON.parse(localStorage.getItem("tracklist")||"[]"),this.wallets=JSON.parse(localStorage.getItem("walletlist")||"[]"),this.enableSound=JSON.parse(localStorage.getItem("enableSound")===null?"false":localStorage.getItem("enableSound")),navigator.serviceWorker.addEventListener("message",this.listeneraction)},beforeUnmount(){navigator.serviceWorker.removeEventListener("message",this.listeneraction)},watch:{tracks:{handler(t){localStorage.setItem("tracklist",JSON.stringify(t))},deep:!0},wallets:{handler(t){localStorage.setItem("walletlist",JSON.stringify(t))},deep:!0}},computed:{addTrack(){let t={};this.Select==="Gas"?t={id:Date.now(),type:"gas",title:this.Select,sign:this.Sign,price:this.Price,select:!0}:t={id:Date.now(),type:"token",title:this.Select,sign:this.Sign,price:this.Price,select:!0},this.tracks.push(t),this.Select="",this.Sign="<",this.Price="",this.disableBtnTrack=!0,t.type==="gas"?this.sendgas(t):this.sendtoken(t)}},methods:{listeneraction(t){if(t.data.gas!=null&&t.data.gas[2]!=null){let l=JSON.parse(localStorage.getItem("tracklist"));Object.keys(l).forEach(r=>{l[r].type==="gas"&&l[r].id===parseInt(t.data.gas[2].id)&&(l[r].select=!1)}),localStorage.setItem("tracklist",JSON.stringify(l)),this.tracks=JSON.parse(localStorage.getItem("tracklist"))}if(t.data.token!=null&&t.data.token[2]!=null){let l=JSON.parse(localStorage.getItem("tracklist"));Object.keys(l).forEach(r=>{l[r].type==="token"&&l[r].id===parseInt(t.data.token[2].id)&&(l[r].select=!1)}),localStorage.setItem("tracklist",JSON.stringify(l)),this.tracks=JSON.parse(localStorage.getItem("tracklist"))}},async updatetracklist(){let t=[],r=await new Promise((e,o)=>{let g=indexedDB.open("notificationdb");g.onerror=function(p){console.log("Cannot open notification database")},g.onsuccess=function(p){let v=g.result.transaction(["notification"],"readwrite").objectStore("notification");v.openCursor(null,"prev").onsuccess=function(S){let a=S.target.result;a?a.value.gas!=null&&!a.value.gas[0][3].checked?(t.push.apply(t,a.value.gas),v.put({gas:[[a.value.gas[0][0],a.value.gas[0][1],a.value.gas[0][2],{checked:!0}]]},a.key),a.continue()):(a.value.token!=null&&!a.value.token[0][3].checked&&(t.push.apply(t,a.value.token),v.put({token:[[a.value.token[0][0],a.value.token[0][1],a.value.token[0][2],{checked:!0}]]},a.key)),a.continue()):e(t)}}}),m=JSON.parse(localStorage.getItem("tracklist")||"[]");for(let e=0;e<r.length;e++)Object.keys(m).forEach(o=>{m.map(g=>g.id)[o]===parseInt(r[e][2].id)&&(m[o].select=!1)});localStorage.setItem("tracklist",JSON.stringify(m)),this.tracks=JSON.parse(localStorage.getItem("tracklist"))},selectTrack(t){let l=this.tracks.filter(r=>r.id===t)[0];l.select=!l.select,l.type==="gas"?this.sendgas(l):this.sendtoken(l)},selectWallet(t){let l=this.wallets.filter(r=>r.id===t)[0];l.select=!l.select,this.sendwallet(l)},deleteTrack(t){let l=this.tracks.filter(r=>r.id===t)[0];this.tracks=this.tracks.filter(r=>r.id!=t),l.type==="gas"?fetch(`${this.API}/alert/gas/del/${t}`,{mode:"cors",credentials:"include"}):fetch(`${this.API}/alert/token/del/${t}`,{mode:"cors",credentials:"include"})},deleteWallet(t){let l=this.wallets.filter(m=>m.id===t)[0];this.wallets=this.wallets.filter(m=>m.id!=t);let r=indexedDB.open("notificationdb");r.onerror=function(m){console.log("Cannot open notification database")},r.onsuccess=function(m){let o=r.result.transaction(["notification"],"readwrite").objectStore("notification");o.openCursor().onsuccess=function(g){let p=g.target.result;p&&(p.value.wallet!=null&&parseInt(p.value.wallet[0][3].id)===l.id&&o.delete(p.key),p.continue())}},fetch(`${this.API}/alert/wallet/del/${t}`,{mode:"cors",credentials:"include"})},updateBtn(){this.disableBtnTrack=!this.Price},updateBtnEdit(){this.disableBtnEdit=!this.EditingName||!this.EditingAddr},updateBtnWallet(){this.disableBtnWallet=!this.AddingName||!this.AddingAddr},sendCurrentTrack(t){let l=this.tracks.filter(r=>r.id===t)[0];this.CurrentTrack=l},sendCurrentWallet(t){let l=this.wallets.filter(r=>r.id===t)[0];this.CurrentWallet=l},saveEdit(t){const l=/(.*)(\n|\b)/g,r=this.EditingAddr.match(l);let m=[];for(const o in r)r[o]!==""&&m.push(r[o].trim());let e=this.wallets.filter(o=>o.id===t)[0];e.title=this.EditingName,e.addresses=m,e.colour=this.EditingColor,e.select=!0,this.sendwallet(e),this.disableBtnEdit=!1},display(t){let l=this.wallets.filter(e=>e.addresses===t)[0],r="";return l.addresses.forEach(e=>r+=e+`
`),r},addWallet(){const t=/(.*)(\n|\b)/g,l=this.AddingAddr.match(t);let r=[];for(const e in l)l[e]!==""&&r.push(l[e].trim());let m={id:Date.now(),colour:this.AddingColor,title:this.AddingName,select:!0,addresses:r};this.wallets.push(m),this.sendwallet(m),this.AddingColor="#ffa000",this.disableBtnWallet=!0},getUnit(t){return t.type==="gas"?"Gwei":"USD"},sendwallet(t){fetch(`${this.API}/alert/wallet/set/${t.id}`,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json"},body:JSON.stringify({name:t.title,color:t.colour,address:t.addresses,select:t.select}),mode:"cors",credentials:"include"})},sendgas(t){fetch(`${this.API}/alert/gas/set/${t.id}`,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json"},body:JSON.stringify({sign:t.sign,value:t.price,select:t.select}),mode:"cors",credentials:"include"})},sendtoken(t){fetch(`${this.API}/alert/token/set/${t.id}`,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/json"},body:JSON.stringify({name:t.title,sign:t.sign,value:t.price,select:t.select}),mode:"cors",credentials:"include"})}}},X={key:0},Y=j("br",null,null,-1),Z=j("br",null,null,-1);function $(t,l,r,m,e,o){const g=u("v-list-subheader"),p=u("v-checkbox"),E=u("v-list-item-avatar"),v=u("v-list-item-title"),S=u("v-list-item-header"),a=u("v-btn"),I=u("v-list-item-action"),N=u("v-list-item"),k=u("v-card-actions"),W=u("v-list"),J=u("v-divider"),L=u("v-chip"),_=u("v-card"),A=u("v-card-text"),C=u("v-dialog"),G=u("v-autocomplete"),V=u("v-col"),M=u("v-select"),T=u("v-text-field"),q=u("v-row"),B=u("v-color-picker"),O=u("v-textarea"),D=u("v-spacer"),z=K;return R("auth").value!==void 0?(h(),x("div",X,[s(z,null,{default:n(()=>[s(_,{class:"mx-auto","max-width":"400"},{default:n(()=>[s(W,{subheader:""},{default:n(()=>[s(g,null,{default:n(()=>[c(d(t.$t("setAlert.gasAndCrypto")),1)]),_:1}),(h(!0),x(P,null,U(e.tracks,i=>(h(),b(N,{key:i.id,onClick:w=>o.selectTrack(i.id)},{default:n(()=>[s(E,{start:""},{default:n(()=>[s(p,{"model-value":i.select,color:"primary","hide-details":""},null,8,["model-value"])]),_:2},1024),s(S,null,{default:n(()=>[s(v,null,{default:n(()=>[c(d(i.title)+" "+d(i.sign)+" "+d(i.price)+" "+d(o.getUnit(i)),1)]),_:2},1024)]),_:2},1024),s(I,null,{default:n(()=>[s(a,{rounded:"",flat:"",icon:"mdi-trash-can",size:"small",onClick:f(w=>(o.sendCurrentTrack(i.id),e.dialogDelTrack=!0),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),s(k,null,{default:n(()=>[s(a,{class:"mx-auto text-center",onClick:l[0]||(l[0]=f(i=>e.dialogAddTrack=!0,["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.addMore")),1)]),_:1})]),_:1})]),_:1}),s(J),s(W,null,{default:n(()=>[s(g,null,{default:n(()=>[c(d(t.$t("setAlert.wallAddrList")),1)]),_:1}),(h(!0),x(P,null,U(e.wallets,i=>(h(),b(N,{key:i.id,onClick:w=>o.selectWallet(i.id)},{default:n(()=>[s(E,{start:""},{default:n(()=>[s(p,{"model-value":i.select,color:"primary","hide-details":""},null,8,["model-value"])]),_:2},1024),s(S,null,{default:n(()=>[s(v,null,{default:n(()=>[s(L,{color:i.colour},{default:n(()=>[c(d(i.title),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),s(I,null,{default:n(()=>[s(a,{rounded:"",flat:"",icon:"mdi-lead-pencil",size:"small",onClick:f(w=>(o.sendCurrentWallet(i.id),e.EditingName=i.title,e.EditingColor=i.colour,e.EditingAddr=o.display(i.addresses),e.dialogEdit=!0),["stop"])},null,8,["onClick"]),s(a,{rounded:"",flat:"",icon:"mdi-trash-can",size:"small",onClick:f(w=>(o.sendCurrentWallet(i.id),e.dialogDelWallet=!0),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),s(k,null,{default:n(()=>[s(a,{class:"mx-auto text-center",onClick:l[1]||(l[1]=f(i=>(e.AddingName="",e.AddingAddr="",e.AddingColor="#ffa000",e.dialogAddWallet=!0),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.addMore")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(C,{modelValue:e.dialogDelTrack,"onUpdate:modelValue":l[4]||(l[4]=i=>e.dialogDelTrack=i),"max-width":"400","retain-focus":""},{default:n(()=>[s(_,{class:"mx-auto text-center","min-width":"350"},{default:n(()=>[t.$i18n.locale!=="ja"?(h(),b(A,{key:0},{default:n(()=>[c(d(t.$t("setAlert.sureDelete"))+" ",1),Y,c(" "+d(e.CurrentTrack.title)+" "+d(e.CurrentTrack.sign)+" "+d(e.CurrentTrack.price)+" "+d(o.getUnit(e.CurrentTrack))+"? ",1)]),_:1})):y("",!0),t.$i18n.locale==="ja"?(h(),b(A,{key:1},{default:n(()=>[c(d(e.CurrentTrack.title)+" "+d(e.CurrentTrack.sign)+" "+d(e.CurrentTrack.price)+" "+d(o.getUnit(e.CurrentTrack))+" "+d(t.$t("setAlert.sureDelete")),1)]),_:1})):y("",!0),s(k,null,{default:n(()=>[s(a,{class:"mx-auto text-center",onClick:l[2]||(l[2]=f(i=>(o.deleteTrack(e.CurrentTrack.id),e.dialogDelTrack=!1),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.yes")),1)]),_:1}),s(a,{class:"mx-auto text-center",onClick:l[3]||(l[3]=f(i=>e.dialogDelTrack=!1,["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.no")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(C,{modelValue:e.dialogAddTrack,"onUpdate:modelValue":l[9]||(l[9]=i=>e.dialogAddTrack=i),"max-width":"400","retain-focus":""},{default:n(()=>[s(_,{class:"mx-auto text-center","min-width":"370"},{default:n(()=>[s(q,{"no-gutters":""},{default:n(()=>[s(V,null,{default:n(()=>[s(G,{modelValue:e.Select,"onUpdate:modelValue":l[5]||(l[5]=i=>e.Select=i),items:e.items,"hide-details":"","hide-selected":"","menu-icon":"",label:t.$t("setAlert.gasAndCoin"),solo:""},null,8,["modelValue","items","label"])]),_:1}),s(V,null,{default:n(()=>[s(M,{modelValue:e.Sign,"onUpdate:modelValue":l[6]||(l[6]=i=>e.Sign=i),items:e.signselect,variant:"filled",label:"","menu-icon":"","hide-details":"",rules:[e.checkEmpty],disabled:!e.Select,"single-line":""},null,8,["modelValue","items","rules","disabled"])]),_:1}),s(V,null,{default:n(()=>[s(T,{modelValue:e.Price,"onUpdate:modelValue":l[7]||(l[7]=i=>e.Price=i),variant:"filled",label:t.$t("setAlert.price"),type:"number","hide-details":"","persistent-placeholder":"",rules:[e.checkEmpty],onInput:o.updateBtn,disabled:!e.Select},null,8,["modelValue","label","rules","onInput","disabled"])]),_:1})]),_:1}),s(k,null,{default:n(()=>[s(a,{text:"",class:"mx-auto text-center",disabled:e.disableBtnTrack,onClick:l[8]||(l[8]=f(i=>(o.addTrack,e.dialogAddTrack=!1),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(C,{modelValue:e.dialogEdit,"onUpdate:modelValue":l[14]||(l[14]=i=>e.dialogEdit=i),"max-width":"400","retain-focus":""},{default:n(()=>[s(_,{class:"mx-auto text-center","min-width":"350"},{default:n(()=>[s(T,{modelValue:e.EditingName,"onUpdate:modelValue":l[10]||(l[10]=i=>e.EditingName=i),outlined:"","persistent-placeholder":"",autofocus:"",label:"Name",color:"primary",rules:[e.checkEmpty],onInput:o.updateBtnEdit},null,8,["modelValue","rules","onInput"]),s(A,{class:"justify-center text-center px-2 py-0 mt-n2 mb-2"},{default:n(()=>[s(B,{modelValue:e.EditingColor,"onUpdate:modelValue":l[11]||(l[11]=i=>e.EditingColor=i),"hide-inputs":"","hide-canvas":"","hide-sliders":"","show-swatches":"",swatches:e.colorOpt,width:"400",elevation:"0"},null,8,["modelValue","swatches"])]),_:1}),s(O,{modelValue:e.EditingAddr,"onUpdate:modelValue":l[12]||(l[12]=i=>e.EditingAddr=i),outlined:"","persistent-placeholder":"","auto-grow":"",label:"Addresses (one per line)",color:"primary",rules:[e.checkEmpty],onInput:o.updateBtnEdit},null,8,["modelValue","rules","onInput"]),s(k,{class:"mx-auto text-center mt-n2"},{default:n(()=>[s(D),s(a,{class:"mx-auto text-center",disabled:e.disableBtnEdit,onClick:l[13]||(l[13]=f(i=>(o.saveEdit(e.CurrentWallet.id),e.dialogEdit=!1),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(C,{modelValue:e.dialogDelWallet,"onUpdate:modelValue":l[17]||(l[17]=i=>e.dialogDelWallet=i),"max-width":"400","retain-focus":""},{default:n(()=>[s(_,{class:"mx-auto text-center","min-width":"350"},{default:n(()=>[t.$i18n.locale!=="ja"?(h(),b(A,{key:0},{default:n(()=>[c(d(t.$t("setAlert.sureDelete"))+" ",1),Z,c(" "+d(e.CurrentWallet.title)+"? ",1)]),_:1})):y("",!0),t.$i18n.locale==="ja"?(h(),b(A,{key:1},{default:n(()=>[c(d(e.CurrentWallet.title)+" "+d(t.$t("setAlert.sureDelete")),1)]),_:1})):y("",!0),s(k,null,{default:n(()=>[s(a,{class:"mx-auto text-center",onClick:l[15]||(l[15]=f(i=>(o.deleteWallet(e.CurrentWallet.id),e.dialogDelWallet=!1),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.yes")),1)]),_:1}),s(a,{class:"mx-auto text-center",onClick:l[16]||(l[16]=f(i=>e.dialogDelWallet=!1,["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.no")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(C,{modelValue:e.dialogAddWallet,"onUpdate:modelValue":l[22]||(l[22]=i=>e.dialogAddWallet=i),"max-width":"400","retain-focus":""},{default:n(()=>[s(_,{class:"mx-auto text-center","min-width":"350"},{default:n(()=>[s(T,{modelValue:e.AddingName,"onUpdate:modelValue":l[18]||(l[18]=i=>e.AddingName=i),outlined:"","persistent-placeholder":"",autofocus:"",label:t.$t("setAlert.groupName"),color:"primary",rules:[e.checkEmpty],onInput:o.updateBtnWallet},null,8,["modelValue","label","rules","onInput"]),s(A,{class:"justify-center text-center px-2 py-0 mt-n2 mb-2"},{default:n(()=>[s(B,{modelValue:e.AddingColor,"onUpdate:modelValue":l[19]||(l[19]=i=>e.AddingColor=i),"hide-inputs":"","hide-canvas":"","hide-sliders":"","show-swatches":"",swatches:e.colorOpt,width:"400",elevation:"0"},null,8,["modelValue","swatches"])]),_:1}),s(O,{modelValue:e.AddingAddr,"onUpdate:modelValue":l[20]||(l[20]=i=>e.AddingAddr=i),outlined:"","persistent-placeholder":"","auto-grow":"",label:t.$t("setAlert.addressInput"),color:"primary",rules:[e.checkEmpty],onInput:o.updateBtnWallet},null,8,["modelValue","label","rules","onInput"]),s(k,{class:"mx-auto text-center mt-n2"},{default:n(()=>[s(D),s(a,{class:"mx-auto text-center",disabled:e.disableBtnWallet,onClick:l[21]||(l[21]=f(i=>(o.addWallet(),e.dialogAddWallet=!1),["stop"]))},{default:n(()=>[c(d(t.$t("setAlert.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])):y("",!0)}var le=F(Q,[["render",$]]);export{le as default};
